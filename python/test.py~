#!/usr/bin/python
import urllib2
from pyonep import onep
from datetime import datetime,timedelta
import numpy
import time
cik = "8ca0befbd3553ba02cb6212b3ba6a9aec874a2ae"
exoClient = onep.OnepV1()
dataport_alias_temp = 'weatherTemp'

o = onep.OnepV1()

#nowUtc = datetime.utcnow()
nowUtc = datetime.now()

hours6 = timedelta(hours=6)
beforeUtc = nowUtc - hours6
startUnixTimeStamp = int(time.mktime(beforeUtc.timetuple()))
isok, response = o.read(
    cik,
    {'alias': dataport_alias_temp},
    {'starttime': startUnixTimeStamp,'limit':50000, 'sort': 'asc', 'selection': 'all'})

print isok
#print response

meanTemp = numpy.mean(numpy.array(response)[:,1])
print meanTemp
print int(time.mktime(beforeUtc.timetuple()))
print int(time.mktime(nowUtc.timetuple()))
